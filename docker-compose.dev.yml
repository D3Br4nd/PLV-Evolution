services:
  # Development overrides (do not use in production)
  #
  # Usage:
  #   docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d --build
  #
  # This keeps the production image (vendor + built assets) but bind-mounts source
  # so PHP/Svelte changes are reflected without rebuilding the PHP image.
  app:
    volumes:
      # Live code mounts (avoid mounting the whole repo to not shadow /app/vendor from the image)
      - ./app:/app/app
      - ./bootstrap:/app/bootstrap
      - ./config:/app/config
      - ./database:/app/database
      - ./resources:/app/resources
      - ./routes:/app/routes
      - ./public:/app/public
      - ./artisan:/app/artisan

      # Persist Laravel storage (uploads, cache, logs)
      - ./docker/storage:/app/storage

  # Vite dev server is optional; keep using `docker compose --profile dev up -d vite`
  # or start it explicitly when using this dev compose file.


